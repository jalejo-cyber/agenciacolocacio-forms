<!DOCTYPE html> 
<html lang="ca">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Inscripció Agència de Col·locació</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600&display=swap" rel="stylesheet">

<style>
:root {
  --primary: #d6002a;
  --label-color: #8f8f8f;
  --text-color: #2d2d2d;
  --page-bg: #eeeeee;
}

*{box-sizing:border-box;font-family:'Montserrat',sans-serif;}

body{
  margin:0;
  background:var(--page-bg);
  display:flex;
  justify-content:center;
  padding:30px 20px;
}

.form-container{
  width:100%;
  max-width:1200px;
  background:white;
  padding:30px;
  border-radius:14px;
}

h2{
  margin-top:0;
  margin-bottom:25px;
}

.section-title{
  grid-column:span 3;
  font-size:14px;
  font-weight:600;
  color:#333;
  margin:10px 0 -6px;
  padding:10px 0;
  border-bottom:1px solid #eee;
}

.grid{
  display:grid;
  grid-template-columns:repeat(3,minmax(0,1fr));
  gap:22px;
}

.form-group{
  display:flex;
  flex-direction:column;
}

label{
  font-size:13px;
  font-weight:500;
  color:var(--label-color);
  margin-bottom:6px;
}

input,select,textarea{
  width:100%;
  height:48px;
  padding:0 14px;
  border-radius:10px;
  border:1px solid #e2e2e2;
  font-size:14px;
  background:#fafafa;
  outline:none;
}

textarea{
  height:120px;
  padding:12px;
}

input:focus,select:focus,textarea:focus{
  background:white;
  border-color:var(--primary);
  box-shadow:0 0 0 3px rgba(214,0,42,0.12);
}

.full{grid-column:span 3;}

.radio-group{
  display:flex;
  gap:18px;
  margin-top:10px;
}

.radio-group label{
  font-size:13px;
  display:flex;
  align-items:center;
  gap:6px;
  cursor:pointer;
}

.radio-group input[type="radio"]{
  width:16px;
  height:16px;
  accent-color:var(--primary);
}

.file-upload{
  display:flex;
  align-items:center;
  border-radius:10px;
  border:1px solid #e2e2e2;
  background:#fafafa;
  height:48px;
  overflow:hidden;
}

.file-upload button{
  background:var(--primary);
  color:white;
  border:none;
  padding:0 20px;
  height:100%;
  cursor:pointer;
}

.file-upload span{
  padding:0 14px;
  flex:1;
  font-size:14px;
  color:#777;
}

.file-upload input{display:none;}

.submit-btn{
  margin-top:30px;
  background:var(--primary);
  color:white;
  border:none;
  height:52px;
  padding:0 45px;
  border-radius:999px;
  font-size:15px;
  font-weight:600;
  cursor:pointer;
}

/* ===== POPUP CENTRAT ===== */

.success-modal{
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%, -50%) scale(0.9);
  background:white;
  padding:35px 45px;
  border-radius:16px;
  box-shadow:0 25px 60px rgba(0,0,0,0.18);
  text-align:center;
  width:420px;
  max-width:90%;
  opacity:0;
  pointer-events:none;
  transition:all 0.25s ease;
  z-index:9999;
}

.success-modal.active{
  opacity:1;
  pointer-events:auto;
  transform:translate(-50%, -50%) scale(1);
}

.success-modal button{
  margin-top:22px;
  background:var(--primary);
  color:white;
  border:none;
  padding:9px 28px;
  border-radius:999px;
  cursor:pointer;
}

@media(max-width:900px){
  .grid{grid-template-columns:1fr;}
  .full,.section-title{grid-column:span 1;}
}
</style>
</head>

<body>

<div class="form-container">
<h2>Inscripció Agència de Col·locació</h2>

<form id="agenciaForm" enctype="multipart/form-data">
<div class="grid">

<div class="section-title">Dades personals</div>

<div class="form-group">
<label>Nom</label>
<input type="text" name="nom" required>
</div>

<div class="form-group">
<label>Primer cognom</label>
<input type="text" name="cognom1" required>
</div>

<div class="form-group">
<label>Segon cognom</label>
<input type="text" name="cognom2">
</div>

<div class="form-group">
<label>DNI / NIE</label>
<input type="text" name="dni" required>
</div>

<div class="form-group">
<label>Data de naixement</label>
<input type="date" name="dataNaixement" required>
</div>

<div class="form-group">
<label>Gènere</label>
<select name="genere" required>
<option value="">Selecciona</option>
<option>Home</option>
<option>Dona</option>
<option>No binari</option>
</select>
</div>

<div class="form-group">
<label>Correu electrònic</label>
<input type="email" name="email" required>
</div>

<div class="form-group">
<label>Telèfon</label>
<input type="text" name="telefon" required>
</div>

<div class="form-group">
<label>Població</label>
<input type="text" name="poblacio" required>
</div>

<div class="form-group">
<label>Discapacitat</label>
<select name="discapacitat" required>
<option value="">Selecciona</option>
<option>Sí</option>
<option>No</option>
</select>
</div>

<div class="form-group">
<label>Nivell d'estudis</label>
<select name="estudis" required>
<option value="">Selecciona</option>
<option>00 Sense estudis</option>
<option>10 Graduat escolar/ESO</option>
<option>20 Batxillerat</option>
<option>30 Títol de Tècnic/a/FP-CF Grau Mitjà/Certificat Profesionalitat Nivell 2</option>
<option>30 Títol de Tècnic/a Superior/FP-CF Grau Superior/Certificat Profesionalitat Nivell 3</option>
<option>30 Estudis universitaris de 1r cicle (Diplomatura - Grau)/2n cicle (Llicenciatura / Màster)/3er cicle (Doctorat)</option>
</select>
</div>

<div class="form-group">
<label>Formes part d'algun col·lectiu?</label>
<select name="collectiu" required>
<option value="">Selecciona</option>
<option>Dona</option>
<option>Major de 45 anys</option>
<option>Cap</option>
</select>
</div>

<div class="section-title">Situació i interès laboral</div>

<div class="form-group">
<label>Rebs alguna prestació per desocupació</label>
<select name="prestacio" required>
<option value="">Selecciona</option>
<option>Sí</option>
<option>No</option>
</select>
</div>

<div class="form-group">
<label>Has trobat feina els últims 2 mesos a través de la nostra agència?</label>
<select name="feina2mesos" required>
<option value="">Selecciona</option>
<option>Sí</option>
<option>No</option>
</select>
</div>

<div class="form-group full">
<label>Sector laboral d’interès</label>
<select name="sector" required>
<option value="">Selecciona</option>
<option>Administració / Comptabilitat</option>
<option>Comercial / Vendes</option>
<option>Atenció al client</option>
<option>RRHH</option>
<option>Docència</option>
<option>Restauració</option>
<option>Logística, transports i mobilitat</option>
<option>Salut i atenció a persones/Tercer sector (social)</option>
<option>Neteja/ Manteniment</option>
<option>Dret, consultoria i legislació/Auditoria</option>
<option>XXSS/Transformació digital/Informàtica/Telecomunicacions</option>
<option>Construcció i instal·lacions (fuster,soldador,electricista,...)</option>
<option>Artesania i produccions artístiques</option>
<option>Oci i benestar</option>
<option>Altres</option>
</select>
</div>

<div class="form-group">
<label>Disponibilitat horària</label>
<select name="disponibilitat" required>
<option value="">Selecciona</option>
<option>Jornada completa</option>
<option>Jornada parcial</option>
<option>Indiferent</option>
</select>
</div>

<div class="form-group full">
<label>Adjuntar CV</label>
<div class="file-upload">
<button type="button" id="fileBtn">Seleccionar arxiu</button>
<span id="fileName">Cap arxiu seleccionat</span>
<input type="file" name="cv" id="fileInput" required>
</div>
</div>

<div class="form-group full">
<label>Avís legal</label>
<textarea readonly>
La informació continguda en aquest missatge i/o arxiu(s) adjunt(s), enviada des de FOMENT FORMACIÓ, és confidencial/privilegiada i està destinada a ser llegida només per la/les persona/es a la/les que va dirigida. Li recordem que les seves dades han estat incorporades en el sistema de tractament de FOMENT FORMACIÓ i que sempre que es compleixin els requisits exigits per la normativa, vostè podrà exercir els seus drets d'accés, rectificació, limitació de tractament, supressió, portabilitat i oposició/revocació, en els termes que estableix la normativa vigent en matèria de protecció de dades, dirigint la seva petició a l'adreça postal AV. FRANCESC CAMBÓ Nº 10 DE BARCELONA CP 08003, o bé a través del correu electrònic formacio@foment.com

Si vostè llegeix aquest missatge i no és el destinatari assenyalat, l'empleat o l'agent responsable de lliurar el missatge al destinatari, o ha rebut aquesta comunicació per error, l'informem que està totalment prohibida, i pot ser il·legal, qualsevol divulgació, distribució o reproducció d'aquesta comunicació, i li preguem que ens ho notifiqui immediatament i ens retorni el missatge original a l'adreça esmentada. Gràcies

* Si no acepteu no podrem fer el procediment que pertoca
</textarea>
<div class="radio-group">
<label><input type="radio" name="legal" value="accepto" required> Accepto</label>
<label><input type="radio" name="legal" value="no_accepto" required> No accepto</label>
</div>
</div>

</div>

<button type="submit" class="submit-btn">Enviar inscripció</button>
</form>
</div>

<!-- POPUP -->
<div class="success-modal" id="successModal">
  <h3>T'has inscrit a l'agència de col·locació amb èxit!</h3>
  <button type="button" onclick="closeModal()">D'acord</button>
</div>

<script>
document.addEventListener("DOMContentLoaded", function(){

  const discapacitatSelect = document.querySelector("select[name='discapacitat']");
const collectiuSelect = document.querySelector("select[name='collectiu']");

if(discapacitatSelect && collectiuSelect){

  discapacitatSelect.addEventListener("change", function(){

    if(this.value === "Sí"){
      collectiuSelect.value = "Cap";   // posa Cap automàticament
      collectiuSelect.disabled = true; // desactiva
      collectiuSelect.style.opacity = "0.6";
    } else {
      collectiuSelect.disabled = false; // torna a activar
      collectiuSelect.style.opacity = "1";
    }

  });

}

  const fileBtn = document.getElementById("fileBtn");
  const fileInput = document.getElementById("fileInput");
  const fileName = document.getElementById("fileName");
  const modal = document.getElementById("successModal");
  const form = document.getElementById("agenciaForm");

  fileBtn.addEventListener("click", () => fileInput.click());

  fileInput.addEventListener("change", () => {
    fileName.textContent = fileInput.files.length
      ? fileInput.files[0].name
      : "Cap arxiu seleccionat";
  });

  form.addEventListener("submit", async function(e){
    e.preventDefault();
    const formData = new FormData(this);

    try{
      const res = await fetch("/api/send-form", {
        method: "POST",
        body: formData
      });

      if(res.ok){
        modal.classList.add("active");
        this.reset();
        fileName.textContent = "Cap arxiu seleccionat";
      } else {
        alert("Error en l'enviament");
      }

    } catch(err){
      alert("Error de connexió");
    }
  });

  window.closeModal = function(){
    modal.classList.remove("active");
  };

});
</script>

</body>
</html>

